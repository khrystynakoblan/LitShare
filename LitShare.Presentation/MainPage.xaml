<Window x:Class="LitShare.Presentation.MainPage"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="LitShare" Height="700" Width="1200"
        WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Ліва панель з фільтрами -->
        <Border Grid.Column="0" Background="#F5F5F5" BorderBrush="#DDDDDD" BorderThickness="0,0,1,0">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="15">
                    <!-- Логотип LitShare -->
                    <TextBlock Text="LitShare" FontSize="24" FontWeight="Bold" 
                               Foreground="#2C3E50" Margin="0,0,0,20" 
                               HorizontalAlignment="Left"/>

                    <!-- Фільтр: Локація -->
                    <TextBlock Text="Фільтр:" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>

                    <TextBlock Text="Локація:" FontSize="12" Margin="0,0,0,5"/>
                    <TextBox x:Name="LocationTextBox" Height="25" Margin="0,0,0,15" 
                             TextChanged="FilterChanged"/>

                    <!-- Тип угоди -->
                    <TextBlock Text="Тип угоди:" FontSize="12" Margin="0,10,0,5"/>
                    <RadioButton x:Name="ExchangeRadio" Content="Обмін" GroupName="DealType" 
                                 Margin="0,3" Checked="FilterChanged"/>
                    <RadioButton x:Name="FreeRadio" Content="Безкоштовно" GroupName="DealType" 
                                 Margin="0,3,0,15" Checked="FilterChanged"/>

                    <!-- Жанр -->
                    <TextBlock Text="Жанр:" FontSize="12" Margin="0,10,0,5"/>
                    <StackPanel x:Name="GenresPanel" Margin="10,0,0,0" />
                    
                </StackPanel>
                <!-- ✅ ДОДАНО ЗАКРИТТЯ -->
            </ScrollViewer>
        </Border>

        <!-- Права панель з контентом -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Верхня панель -->
            <Border Grid.Row="0" Background="White" BorderBrush="#DDDDDD" BorderThickness="0,0,0,1" Padding="15">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Пошук -->
                    <TextBox x:Name="SearchTextBox" Grid.Column="0" Height="30" VerticalContentAlignment="Center" 
                             Padding="5" Margin="0,0,10,0" TextChanged="SearchTextBox_TextChanged"
                             GotFocus="SearchTextBox_GotFocus" LostFocus="SearchTextBox_LostFocus"/>

                    <!-- Кнопка "Мій профіль" -->
                    <Button Grid.Column="1" Content="Мій профіль" Height="30" Width="120" 
                            Background="#4A4A4A" Foreground="White" BorderThickness="0" 
                            Margin="0,0,10,0" Cursor="Hand" Click="MyProfile_Click"/>

                    <!-- Кнопка "+ Додати книгу" -->
                    <Button Grid.Column="2" Content="+ Додати книгу" Height="30" Width="120" 
                            Background="#4A4A4A" Foreground="White" BorderThickness="0" 
                            Cursor="Hand" Click="AddBook_Click"/>
                </Grid>
            </Border>

            <!-- Область з книгами -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="15">
                    <TextBlock x:Name="ResultsCountText" Text="Знайдено: 16 книг" FontSize="12" Foreground="Gray" Margin="0,0,0,15"/>

                    <!-- Сітка книг -->
                    <ItemsControl x:Name="BooksItemsControl">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <UniformGrid Columns="4" HorizontalAlignment="Left"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Background="White" BorderBrush="#E0E0E0" BorderThickness="1" 
                                        Margin="5" Width="220" Height="280" Cursor="Hand"
                                        PreviewMouseLeftButtonDown="BookCard_Click">
                                    <Border.Effect>
                                        <DropShadowEffect BlurRadius="5" ShadowDepth="2" Opacity="0.2"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <!-- Зображення книги -->
                                        <Border Height="180" Background="#E8E8E8">
                                            <Image Source="{Binding ImagePath}" Stretch="UniformToFill"/>
                                        </Border>

                                        <!-- Інформація про книгу -->
                                        <StackPanel Margin="10">
                                            <TextBlock Text="{Binding Title}" FontWeight="Bold" 
                                                       TextWrapping="Wrap" Margin="0,0,0,3"/>
                                            <TextBlock Text="{Binding Author}" FontSize="11" 
                                                       Foreground="Gray" Margin="0,0,0,3"/>
                                            <TextBlock Text="{Binding Location}" FontSize="11" 
                                                       Foreground="Gray"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Grid>
</Window>
